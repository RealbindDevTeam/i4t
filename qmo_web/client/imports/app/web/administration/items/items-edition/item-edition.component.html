<md-card>
    <md-card-content>
        <form [formGroup]="_itemEditionForm">
             <md-tab-group [(selectedIndex)]="selectedIndex">
                 <md-tab [disabled]="!canMove(0)" label="{{'ITEMS.SECTIONS_CATEGORIES' | translate}}">
                     <md-card>
                        <md-card-title>{{'ITEMS.SECTIONS_CATEGORIES' | translate}}</md-card-title>
                        <md-card-subtitle>{{'ITEMS.SECTIONS_CATEGORIES_TEXT_EDIT' | translate}}</md-card-subtitle>
                        <md-card-content>
                            <table style="width: 100%" cellspacing="0">
                                <tr>
                                    <td>
                                        <md-select formControlName="editSectionId" placeholder="{{'ITEMS.SELECT_SECTION' | translate}}" style="width: 95%;" [(ngModel)]="_selectedSection">
                                            <md-option *ngFor="let sec of _sections | async" (click)="changeSectionEdit(sec._id);" value="{{sec._id}}" ng-selected="_itemSection === sec._id">{{sec.name}}</md-option>
                                        </md-select>
                                    </td>
                                    <td>
                                        <md-select formControlName="editCategoryId" placeholder="{{'ITEMS.SELECT_CATEGORY' | translate}}" style="width: 95%;" [(ngModel)]="_selectedCategory">
                                            <md-option *ngFor="let cat of _categories | async" (click)="changeCategoryEdit(cat._id);" value="{{cat._id}}" ng-selected="_itemCategory === cat._id">{{cat.name}}</md-option>
                                        </md-select>
                                    </td>
                                    <td>
                                        <md-select formControlName="editSubcategoryId" placeholder="{{'ITEMS.SELECT_SUBCATEGORY' | translate}}" style="width: 95%;" [(ngModel)]="_selectedSubcategory">
                                            <md-option *ngFor="let subcat of _subcategories | async" (click)="changeSubcategoryEdit(subcat._id);" value="{{subcat._id}}" ng-selected="_itemSubcategory === subcat._id">{{subcat.name}}</md-option>
                                        </md-select>
                                    </td>
                                </tr>
                            </table>
                        </md-card-content>
                        <md-card-actions align="end">
                            <button md-raised-button (click)="_dialogRef.close()">{{'CANCEL' | translate}}</button>
                            <button md-raised-button (click)="next()" [disabled]="!canMove(1)">{{'NEXT' | translate}}</button>
                        </md-card-actions>
                     </md-card>
                 </md-tab>
                 <md-tab [disabled]="!canMove(1)" label="{{'ITEMS.GENERAL' | translate}}">
                     <md-card>
                        <md-card-title>{{'ITEMS.GENERAL_INFORMATION' | translate}}</md-card-title>
                        <md-card-subtitle>{{'ITEMS.GENERAL_TEXT_EDIT' | translate}}</md-card-subtitle>
                        <md-card-content>
                            <table style="width: 100%" cellspacing="0">
                                <tr>
                                    <td colspan="3">
                                        <md-input-container style="width: 95%">
                                            <input mdInput required formControlName="editName" placeholder="{{'NAME' | translate}}" minlength="1" maxlength="55" #inputName>
                                            <md-hint align="end">{{inputName.value.length}} / 55</md-hint>
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <md-input-container style="width: 100%">
                                            <input mdInput required formControlName="editPrice" placeholder="{{'PRICING' | translate}}" minlength="1" maxlength="20" #inputPrice>
                                            <md-hint align="end">{{inputPrice.value.length}} / 20</md-hint>
                                            <span md-prefix>$&nbsp;</span>
                                        </md-input-container>
                                    </td>
                                    <td>
                                        <md-input-container style="width: 95%">
                                            <input mdInput formControlName="editTaxPercentage" placeholder="{{'ITEMS.TAX_PERCENTAGE' | translate}}" maxlength="3" #inputTaxPercentage>
                                            <md-hint align="end">{{inputTaxPercentage.value.length}} / 3</md-hint>
                                        </md-input-container>
                                    </td>
                                    <td>
                                        <md-slide-toggle formControlName="editObservations">{{'ITEMS.OBSERVATIONS' | translate}}</md-slide-toggle>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3">
                                        <md-input-container style="width: 100%">
                                            <textarea mdInput required formControlName="editDescription" placeholder="{{'DESCRIPTION' | translate}}" minlength="1" maxlength="200" #inputDesc></textarea>
                                            <md-hint align="end">{{inputDesc.value.length}} / 200</md-hint>
                                        </md-input-container>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3">
                                        <label>* {{'ITEMS.ITEM_RESTAURANTS' | translate}}</label>
                                        <div style="margin-top: 10px">
                                            <div *ngFor="let rest of _restaurants | async">
                                                <label>- {{rest.name}}</label>
                                                <label></label>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </md-card-content>
                        <md-card-actions align="end">
                            <button md-raised-button (click)="previous()" [disabled]="!canMove(0)">{{'BACK' | translate}}</button>
                            <button md-raised-button (click)="next()" [disabled]="!canMove(2)">{{'NEXT' | translate}}</button>
                        </md-card-actions>
                     </md-card>
                 </md-tab>
                 <md-tab [disabled]="!canMove(2)" label="{{'ITEMS.IMAGE' | translate}}">
                     <md-card>
                        <md-card-title>{{'ITEMS.IMAGE_INFORMATION' | translate}}</md-card-title>
                        <md-card-subtitle>{{'ITEMS.IMAGE_TEXT_EDIT' | translate}}</md-card-subtitle>
                        <md-card-content>
                            <table style="width: 100%" cellspacing="0">
                                <tr>
                                    <td style="text-align: center;">
                                        <div style="display: inline-block;">
                                            <img class="resize" [src]="_itemEditImage"/>
                                        </div>
                                        <div style="padding-top: inherit;">
                                            <label>{{'ITEMS.UPDATE_IMAGE' | translate}}: </label>
                                            <input formControlName="editImage" accept=".png, .jpg, .jpeg" (change)="onChangeEditImage($event)" style="display: none" type="file" name="file-1[]" id="file-1" class="inputfile inputfile-1" data-multiple-caption="{count} files selected"/>
                                            <label for="file-1"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg>
                                                <span *ngIf="!_editImage">{{'CHOOSE_FILE' | translate}}&hellip;</span>
                                                <span *ngIf="_editImage">{{_nameImageFileEdit}}&hellip;</span>
                                            </label>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </md-card-content>
                        <md-card-actions align="end">
                            <button md-raised-button (click)="previous()" [disabled]="!canMove(0)">{{'BACK' | translate}}</button>
                            <button md-raised-button (click)="next()" [disabled]="!canMove(2)">{{'NEXT' | translate}}</button>
                        </md-card-actions>
                     </md-card>
                 </md-tab>
                 <md-tab [disabled]="!canMove(2)" label="{{'ITEMS.GARNISHFOOD' | translate}}">
                    <md-card>
                        <md-card-title>{{'ITEMS.GARNISHFOOD_INFORMATION' | translate}}</md-card-title>
                        <md-card-subtitle>{{'ITEMS.GARNISHFOOD_TEXT_EDIT' | translate}}</md-card-subtitle>
                        <md-card-content>
                            <md-slide-toggle style="display: inline-block" (change)="changeGarnishFoodCheck()" formControlName="editGarnishFoodIsAcceped">{{'ITEMS.ALLOW_ITEM_GARNISHFOOD' | translate}}</md-slide-toggle>
                            <md-input-container style="width: 40%;display: inline-block;padding-left: 2%;">
                                <input mdInput required type="number" [(ngModel)]="_garnishFoodQuantity" formControlName="editGarnishFoodQuantity" placeholder="{{'ITEMS.ITEM_GARNISHFOOD_QUANTITY' | translate}}" #inputGarnishQuantity>
                            </md-input-container>
                            <div *ngIf="_checkedGarnishFood">
                                <p><label *ngIf="!_showGarnishFood" class="label-field-void">{{'ITEMS.NOT_GARNISHFOOD' | translate}}</label></p>
                                <div *ngIf="_showGarnishFood" formGroupName="editGarnishFood" style="padding-top: 20px">
                                    <md-checkbox *ngFor="let garnish of _garnishFoodList" [formControlName]="garnish.name" [class.invalid]="!_itemEditionForm.controls.editGarnishFood.valid" style="padding-right: 15px">{{garnish.name}}</md-checkbox>
                                    <label></label>
                                </div>
                            </div>
                        </md-card-content>
                        <md-card-actions align="end">
                            <button md-raised-button (click)="previous()" [disabled]="!canMove(0)">{{'BACK' | translate}}</button>
                            <button md-raised-button (click)="next()" [disabled]="!canMove(2)">{{'NEXT' | translate}}</button>
                        </md-card-actions>
                    </md-card>
                 </md-tab>
                 <md-tab [disabled]="!canMove(2)" label="{{'ITEMS.ADDITIONS' | translate}}">
                    <md-card>
                        <md-card-title>{{'ITEMS.ADDITIONS_INFORMATION' | translate}}</md-card-title>
                        <md-card-subtitle>{{'ITEMS.ADDITIONS_TEXT' | translate}}</md-card-subtitle>
                        <md-card-content>
                            <md-slide-toggle formControlName="editAdditionsIsAccepted" (change)="changeAdditionCheck()">{{'ITEMS.ALLOW_ITEM_ADDITIONS' | translate}}</md-slide-toggle>
                            <div *ngIf="_checkedAdditions">
                                <p><label *ngIf="!_showAddition" class="label-field-void">{{'ITEMS.NOT_ADDITIONS' | translate}}</label></p>
                                <div *ngIf="_showAddition" formGroupName="editAdditions" style="padding-top: 20px">
                                    <md-checkbox *ngFor="let addition of _additionList" [formControlName]="addition.name" [class.invalid]="!_itemEditionForm.controls.editAdditions.valid" style="padding-right: 15px">{{addition.name}}</md-checkbox>
                                    <label></label>
                                </div>
                            </div>
                        </md-card-content>
                        <md-card-actions align="end">
                            <button md-raised-button (click)="_dialogRef.close()">{{'CANCEL' | translate}}</button>
                            <button md-raised-button (click)="previous()" [disabled]="!canMove(1)">{{'BACK' | translate}}</button>
                            <button md-raised-button [disabled]="!canFinish()" (click)="editItem()">{{'FINISH' | translate}}</button>
                        </md-card-actions>
                    </md-card>
                 </md-tab>
             </md-tab-group>
        </form>
    </md-card-content>
</md-card>