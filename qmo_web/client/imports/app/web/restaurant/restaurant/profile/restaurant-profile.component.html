<mat-card mat-cell="12" class="demo-card demo-basic" *ngIf="!_thereAreRestaurants">
    <mat-card-content>
        <div class="card_initial">
            <div class="card_initial has-image">
                <div class="card_initial-image-container">
                    <img class="card_initial-image" 
                        src="/images/employees.png"/>
                </div>
                <div class="card_initial-copy">
                    <div class="card_initial-tagline">
                        No se Encuentran Restaurantes
                    </div>
                    <div class="card_initial-additional-links">
                        No se Encuentran Restaurantes
                    </div>
                </div>
                <div class="card_initial-button">
                    <button mat-raised-button (click)="goToAddRestaurant()">Crear Restaurante</button>
                </div>
            </div>
        </div>
    </mat-card-content>
</mat-card>

<div class="main" *ngIf="_thereAreRestaurants">        
    <mat-card>
        <mat-card-title>Perfil de Restaurantes</mat-card-title>
        <mat-card-subtitle>Crea el perfil de tus restaurantes para que todos lo vean</mat-card-subtitle>
        <mat-card-content>
            <mat-form-field class="restaurant-select">
                <mat-select placeholder="Selecciona restaurante">
                    <mat-option *ngFor="let res of _restaurants | async" (click)="changeRestaurant(res._id, res.name);" value="{{res._id}}"> {{res.name}}</mat-option>
                </mat-select>
            </mat-form-field>
        </mat-card-content>
    </mat-card>
    <mat-card *ngIf="_thereAreRestaurants && !_anyRestaurantIsSelected" mat-cell="12" class="demo-card demo-basic">
        <mat-card-content>
            <div class="card_initial">
                <div class="card_initial has-image">
                    <div class="card_initial-image-container">
                        <img class="card_initial-image" 
                            src="/images/employees.png"/>
                    </div>
                    <div class="card_initial-copy">
                        <div class="card_initial-tagline">
                            Por favor selecciona un restaurante para crear o modificar su perfil
                        </div>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
    <mat-card *ngIf="_thereAreRestaurants && _anyRestaurantIsSelected">
        <mat-card-title class="restaurant-name">{{_restaurantName}}</mat-card-title>
        <mat-card-subtitle>Ingresa la siguiente informacion para que las personas te conozcan mas al momento de buscarte en iurest. En cualquier momento puedes modificarla para mantenerla actualizada.</mat-card-subtitle>
        <mat-tab-group [(selectedIndex)]="selectedIndex">
            <mat-tab label="Informacion General">
                <mat-card class="general-info">
                    <mat-card-title>- Informacion General</mat-card-title>
                    <mat-card-content>
                        <form [formGroup]="_profileForm">
                            <div class="description">
                                <p>Escribe sobre tu restaurante. Cuentanos sobre tu historia, lo que te motiva, tu comida y tus servicios:</p>
                                <mat-form-field class="description-detail">
                                    <textarea matInput required formControlName="restaurant_description" placeholder="Descripcion de tu restaurante" minlength="1" maxlength="200" #inputDescription></textarea>
                                    <mat-hint align="end">{{inputDescription.value.length}} / 200</mat-hint>
                                </mat-form-field>
                            </div>
                            <div>
                                <div class="input">
                                    <p>Si tienes pagina de internet, escribe la URL (www.mirestaurante.com):</p>
                                    <mat-form-field class="input-left">
                                        <input matInput formControlName="web_page" placeholder="Pagina de intenet" minlength="1" maxlength="40" #inputWebpage>
                                        <mat-hint align="end">{{inputWebpage.value.length}} / 40</mat-hint>
                                    </mat-form-field>
                                </div>
                                <div class="input">
                                    <p>Ingresa el numero de telefono de tu restaurante (si tienes):</p>
                                    <mat-form-field class="input-right">
                                        <input matInput formControlName="phone" placeholder="Telefono" minlength="1" maxlength="30" #inputPhone>
                                        <mat-hint align="end">{{inputPhone.value.length}} / 30</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div>
                                <div class="input">
                                    <p>Ingresa un correo electronico de contacto (Si tienes):</p>
                                    <mat-form-field class="input-left">
                                        <input matInput formControlName="email" placeholder="Email" minlength="1" maxlength="40" #inputEmail>
                                        <mat-hint align="end">{{inputEmail.value.length}} / 40</mat-hint>
                                    </mat-form-field>
                                </div>
                                <div class="input">
                                    <p>Si tienes pagina en Facebook para tu restaurante, ingresa el link aqui:</p>
                                    <mat-form-field class="input-right">
                                        <input matInput formControlName="facebookLink" placeholder="Link de Facebook" minlength="1" maxlength="60" #inputFacebooklink>
                                        <mat-hint align="end">{{inputFacebooklink.value.length}} / 60</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div>
                                <div class="input">
                                    <p>Si tienes pagina en Instagram para tu restaurante, ingresa el link aqui:</p>
                                    <mat-form-field class="input-left">
                                        <input matInput formControlName="instagramLink" placeholder="Link de Instagram" minlength="1" maxlength="60" #inputInstagramlink>
                                        <mat-hint align="end">{{inputInstagramlink.value.length}} / 60</mat-hint>
                                    </mat-form-field>
                                </div>
                                <div class="input">
                                    <p>Si tienes pagina en Twitter para tu restaurante, ingresa el link aqui:</p>
                                    <mat-form-field class="input-right">
                                        <input matInput formControlName="twitterLink" placeholder="Link de Twitter" minlength="1" maxlength="60" #inputTwitterlink>
                                        <mat-hint align="end">{{inputTwitterlink.value.length}} / 60</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                        </form>
                    </mat-card-content>
                </mat-card>
            </mat-tab>
            <mat-tab label="Horario">
                <mat-card>
                    <mat-card-title>- Horario</mat-card-title>
                    <p>Ingresa el horario de atencion del restaurante</p>
                    <div *ngIf="!_scheduleInEditMode" class="schedule">
                        <iu-schedule (finalSchedule)="receiveSchedule($event)"></iu-schedule>
                    </div>
                    <div *ngIf="_scheduleInEditMode" class="schedule">
                        <iu-schedule [scheduleToEdit]="_scheduleToEdit" (finalSchedule)="receiveSchedule($event)"></iu-schedule>
                    </div>
                </mat-card>
            </mat-tab>
            <mat-tab label="Imagenes">
                <mat-card class="images">
                    <mat-card-title>- Imagenes</mat-card-title>
                    <p>Ingresa o actualiza las imagenes de tu restaurante para que te conozcan en internet (se aceptan formatos .png, .jpg, .jpeg):</p>
                    <p *ngIf="(_restaurantProfileThumbs | async)?.length <= 0" class="no-image-msg">No se han ingresado imagenes del restaurante</p>
                    <div class="img-thumb" *ngFor="let thumb of _restaurantProfileThumbs | async;" (click)="removeImageProfile(thumb._id)">
                        <label>
                            <div class="wrapper">
                                <div class="avatar">
                                    <div class="uploadOverlay">
                                        <i class="fa fa-trash"></i>
                                    </div>
                                    <img md-card-image src="{{thumb.url}}">
                                </div>
                            </div>
                        </label>
                    </div>
                    <div class="select-img">
                        <input accept=".png, .jpg, .jpeg" (change)="onChangeImage($event)" style="display: none;"
                            type="file" name="file-1[]" id="file-1" class="inputfile inputfile-1" data-multiple-caption="{count} files selected" multiple/>
                        <label for="file-1" style="width: 40%;text-align: center;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg>
                            <span>{{'CHOOSE_FILE' | translate}}&hellip;</span>
                        </label>
                    </div>
                    <mat-list>
                        <mat-list-item *ngIf="(_filesToUpload)?.length <= 0">
                            <p mat-line>No se han seleccionado imagenes nuevas</p>
                        </mat-list-item>
                        <h3 mat-subheader *ngIf="(_filesToUpload)?.length > 0">Imagenes para guardar</h3>
                        <span *ngFor="let file of _filesToUpload; let i = index">
                            <mat-list-item>
                                <mat-icon mat-list-icon>image</mat-icon>
                                <p mat-line>{{file.name}}</p>
                                <button mat-icon-button matTooltip="Eliminar imagen" (click)="removeImageList(i)">
                                    <mat-icon>clear</mat-icon>
                                </button>
                            </mat-list-item>
                            <mat-divider></mat-divider>
                        </span>
                    </mat-list>
                </mat-card>
            </mat-tab>
        </mat-tab-group>
        <br/>
        <mat-card-content>
            <mat-card-title>- Ubicacion</mat-card-title>                      
            <p>Ingresa la ubicacion del restaurante. Puedes mover la marca en el mapa para ubicar con mayor exactitud la posicion</p>
            <div class="location">
                <agm-map [latitude]="_lat" [longitude]="_lng" (mapClick)="mapClicked($event)">
                    <agm-marker [latitude]="_lat" [longitude]="_lng" [markerDraggable]="true" (dragEnd)="markerDragEnd($event)"></agm-marker>
                </agm-map>
            </div>
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button class="primary-button" [disabled]="!_profileForm.valid" (click)="setRestaurantProfile()">Guardar Informacion</button>
        </mat-card-actions>
    </mat-card>
</div>