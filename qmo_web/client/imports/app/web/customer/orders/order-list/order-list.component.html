<md-card md-cell="12" class="demo-card demo-basic" style="width: 90%; margin: 0 auto" *ngIf="(_orders | async)?.length <= 0">
    <md-card-content>
        <div class="card_initial">
            <div class="card_initial has-image">
                <div class="card_initial-image-container">
                    <img class="card_initial-image" src="/images/items.png" />
                </div>
                <div class="card_initial-copy">
                    <div class="card_initial-tagline">
                        {{'ORDERS.MSG_1' | translate}}
                    </div>
                    <div class="card_initial-additional-links">
                        {{'ORDERS.NO_ORDERS' | translate}}
                    </div>
                </div>
                <div class="card_initial-button">
                    <button md-raised-button (click)="createNewOrderEvent()">{{'ORDERS.ORDER' | translate}}</button>
                </div>
            </div>
        </div>
    </md-card-content>
</md-card>

<div class="order-form-1" *ngIf="(_orders | async)?.length > 0">
    <div class="order-form-2">
        <div class="menu-items">
            <div class="menu-items-content">
                <div class="items">
                    <div id="center" style="width: 80%; margin: 0 auto">
                        <md-select placeholder="{{'ORDER_LIST.TABLE_ORDERS' | translate}}" class="orders-bar" [(ngModel)]="_initialValue">
                            <md-option (click)="changeOrderFilter('all')" value="all">{{'ORDER_LIST.ALL_ORDERS' | translate}}</md-option>
                            <md-option (click)="changeOrderFilter('customer')" value="customer">{{'ORDER_LIST.MY_ORDERS' | translate}}</md-option>
                            <md-option (click)="changeOrderFilter('other')" value="other">{{'ORDER_LIST.OTHER_ORDERS' | translate}}</md-option>
                        </md-select>
                        <div *ngIf="_showCustomerOrders || _showAllOrders">
                            <div *ngFor="let or of _orders | async; let i = index">
                                <md-toolbar class="customer-order" (click)="showCustomerOrderDetail(or,i)">
                                    <i class="fa fa-list-alt" aria-hidden="true" class="order-icon"></i>
                                    <span class="order-code">{{'ORDER_LIST.ORDERS' | translate}} # {{or.code}}</span>
                                    <span>{{'ORDER_LIST.TOTAL' | translate}}: {{or.totalPayment}} {{_currencyCode}}</span>
                                    <span class="app-flex-filler"></span>
                                    <span class="order-status">{{'ORDER_LIST.STATUS' | translate}}: {{or.status | translate}}</span>
                                </md-toolbar>
                                <md-card *ngIf="_orderCustomerIndex == i">
                                    <md-card-content>
                                        <md-list *ngIf="(or.items.length > 0)">
                                            <span *ngFor="let item of _items | async">
                                                <span *ngFor="let it of or.items">
                                                    <template [ngIf]="item._id === it.itemId">
                                                        <md-list-item>
                                                            <img md-list-avatar class="item-image" src="{{ getItemImage(item._id) }}">
                                                            <h4 md-line>{{item.name}}</h4>
                                                            <h5 md-line>
                                                                {{'ORDER_LIST.PRICE' | translate}}: {{it.paymentItem}} {{_currencyCode}} - {{'ORDER_LIST.QUANT' | translate}} {{it.quantity}}
                                                                <div *ngIf="it.garnishFood.length > 0" class="order-item-garnishFood"> - {{'ORDER_LIST.GARNISH_FOOD' | translate}}: {{it.garnishFood.length}}</div>
                                                                <div *ngIf="it.additions.length > 0" class="order-item-additions"> - {{'ORDER_LIST.ADDITIONS' | translate}}: {{it.additions.length}}</div>
                                                            </h5>
                                                            <p md-line *ngIf="!getItemAvailability(item._id)" class="item-unavailable">{{'ORDER_LIST.UNAVAILABLE' | translate}}</p>
                                                            <button md-icon-button *ngIf="or.status === 'ORDER_STATUS.REGISTERED'" (click)="showOrderItemDetail(it)">
                                                                <md-icon class="item-icon">mode_edit</md-icon>
                                                            </button>
                                                            <button md-icon-button *ngIf="or.status !== 'ORDER_STATUS.REGISTERED'" (click)="showOrderItemDetail(it)">
                                                                <md-icon class="item-icon">visibility</md-icon>
                                                            </button>
                                                        </md-list-item>
                                                        <md-divider></md-divider>
                                                    </template>
                                                </span>
                                            </span>
                                        </md-list>
                                        <md-list *ngIf="(or.additions.length > 0)">
                                            <span *ngFor="let addition of _additions | async">
                                                <span *ngFor="let ad of or.additions">
                                                    <template [ngIf]="addition._id === ad.additionId">
                                                        <md-list-item>
                                                            <img md-list-avatar class="item-image" src="/images/default-plate.png">
                                                            <h4 md-line>{{addition.name}} <div style="display: inline-block;font-size: smaller;">({{'ORDER_LIST.ADDITION' | translate}})</div></h4>
                                                            <p md-line>{{'ORDER_LIST.PRICE' | translate}}: {{ad.paymentAddition}} {{_currencyCode}} - {{'ORDER_LIST.QUANT' | translate}} {{ad.quantity}}</p>
                                                            <button md-icon-button *ngIf="or.status === 'ORDER_STATUS.REGISTERED'" (click)="showAdditionsDetail(ad)">
                                                                <md-icon class="item-icon">mode_edit</md-icon>
                                                            </button>
                                                        </md-list-item>
                                                        <md-divider></md-divider>
                                                    </template>
                                                </span>
                                            </span>
                                        </md-list>
                                    </md-card-content>
                                    <md-card-actions *ngIf="_customerCanEdit">
                                        <button class="secondary-button" md-raised-button (click)="cancelCustomerOrder(or)">{{'ORDER_LIST.CANCEL_ORDER' | translate}}</button>
                                        <button class="primary-button" md-raised-button (click)="confirmCustomerOrder(or)">{{'ORDER_LIST.CONFIRM_ORDER' | translate}}</button>
                                    </md-card-actions>
                                </md-card>
                            </div>
                        </div>
                        <div *ngIf="_showOtherOrders || _showAllOrders">
                            <div *ngFor="let or of _ordersTable | async; let in = index">
                                <md-toolbar class="other-order" (click)="showOthersOrderDetail(or,in)">
                                    <i class="fa fa-list-alt" aria-hidden="true" class="order-icon"></i>
                                    <span class="order-code">{{'ORDER_LIST.ORDERS' | translate}} # {{or.code}}</span>
                                    <span>{{'ORDER_LIST.TOTAL' | translate}}: {{or.totalPayment}} {{_currencyCode}}</span>
                                    <span class="app-flex-filler"></span>
                                    <span class="order-status">{{'ORDER_LIST.STATUS' | translate}}: {{or.status | translate}}</span>
                                </md-toolbar>
                                <md-card *ngIf="_orderOthersIndex == in">
                                    <md-card-content>
                                        <md-list *ngIf="(or.items.length > 0)">
                                            <span *ngFor="let item of _items | async">
                                                <span *ngFor="let it of or.items">
                                                    <template [ngIf]="item._id === it.itemId">
                                                        <md-list-item>
                                                            <img md-list-avatar class="item-image" src="{{ getItemImage(item._id) }}">
                                                            <h4 md-line>{{item.name}}</h4>
                                                            <h5 md-line>
                                                                {{'ORDER_LIST.PRICE' | translate}}: {{it.paymentItem}} {{_currencyCode}} - {{'ORDER_LIST.QUANT' | translate}} {{it.quantity}}
                                                                <div *ngIf="it.garnishFood.length > 0" class="order-item-garnishFood"> - {{'ORDER_LIST.GARNISH_FOOD' | translate}}: {{it.garnishFood.length}}</div>
                                                                <div *ngIf="it.additions.length > 0" class="order-item-additions"> - {{'ORDER_LIST.ADDITIONS' | translate}}: {{it.additions.length}}</div>
                                                            </h5>
                                                            <p md-line *ngIf="!getItemAvailability(item._id)" class="item-unavailable">{{'ORDER_LIST.UNAVAILABLE' | translate}}</p>
                                                            <button md-icon-button (click)="showOrderItemDetail(it)">
                                                                <md-icon class="item-icon">visibility</md-icon>
                                                            </button>
                                                        </md-list-item>
                                                        <md-divider></md-divider>
                                                    </template>
                                                </span>
                                            </span>
                                        </md-list>
                                        <md-list *ngIf="(or.additions.length > 0)">
                                            <span *ngFor="let addition of _additions | async">
                                                <span *ngFor="let ad of or.additions">
                                                    <template [ngIf]="addition._id === ad.additionId">
                                                        <md-list-item>
                                                            <img md-list-avatar class="item-image" src="/images/default-plate.png">
                                                            <h4 md-line>{{addition.name}} <div class="addition-message">({{'ORDER_LIST.ADDITION' | translate}})</div></h4>
                                                            <p md-line>{{'ORDER_LIST.PRICE' | translate}}: {{ad.paymentAddition}} {{_currencyCode}} - {{'ORDER_LIST.QUANT' | translate}} {{ad.quantity}}</p>
                                                        </md-list-item>
                                                        <md-divider></md-divider>
                                                    </template>
                                                </span>
                                            </span>
                                        </md-list>
                                    </md-card-content>
                                </md-card>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="fixed-action-btn">
                    <button md-fab (click)="createNewOrderEvent()">
                        <md-icon style="color: white;">add</md-icon>
                    </button>
                </div>

                <div id="item-selected" class="item-detail">
                    <div *ngIf="_showDetails">
                        <div *ngIf="_showOrderItemDetail">
                            <div *ngFor="let item of _itemsToShowDetail | async">
                                <div class="header-detail" #headerDetailCard>
                                    <label>{{item.name}}</label>
                                    <button class="btn-close" md-raised-button (click)="viewItemDetail(true)">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="item-detail-card">
                                    <div class="card-content">
                                        <div class="crop">
                                            <img src="{{ getItemDetailImage(item._id) }}">
                                        </div>
                                        <div class="content">
                                            <md-card-subtitle class="description">{{item.description}}</md-card-subtitle>
                                            <div>{{setMaxGarnishFoodElements(item.garnishFoodQuantity)}}</div>
                                            <div>{{setUnitPrice(item)}}</div>
                                            <md-card-subtitle class="price">{{'ORDER_LIST.PRICE' | translate}}: {{ getItemPrice( item ) }} {{_currencyCode}}</md-card-subtitle>
                                            <md-card-subtitle>{{'ORDER_LIST.COOKING_TIME' | translate}}: {{item.time}}</md-card-subtitle>
                                            <p *ngIf="!getItemAvailability(item._id)" class="item-unavailable">{{'ORDER_LIST.ITEM_UNAVAILABLE' | translate}}</p>
                                            <div *ngIf="getItemAvailability(item._id)">
                                                <div>
                                                    <div class="quantity-count">
                                                        <span>{{'ORDER_LIST.QUANTITY' | translate}}: {{ _quantityCount }}</span>
                                                    </div>
                                                    <div *ngIf="_customerCanEdit" class="inline-block">
                                                        <button md-button class="quantity-button" (click)="removeCount()">
                                                            <md-icon>remove</md-icon>
                                                        </button>
                                                        <button md-button class="quantity-button" (click)="addCount()">
                                                            <md-icon>add</md-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                                <form [formGroup]="_editOrderItemForm">
                                                    <md-input-container *ngIf="item.observations" style="width: 100%;">
                                                        <input mdInput formControlName="observations" placeholder="{{'ORDER_LIST.OBSERVATIONS' | translate}}" maxlength="50" #inputObservation>
                                                        <md-hint align="end">{{inputObservation.value.length}} / 50</md-hint>
                                                    </md-input-container>
                                                    <md-tab-group *ngIf="(item.garnishFood.length > 0) || (item.additions.length > 0)">
                                                        <md-tab *ngIf="(item.garnishFood.length > 0)" label="{{'ORDER_LIST.GARNISH_FOOD' | translate}}">
                                                            <p>{{'ORDER_LIST.SELECT_MAX' | translate}} {{item.garnishFoodQuantity}}:</p>
                                                            <div formGroupName="garnishFood">
                                                                <p *ngFor="let garnish of _garnishFoodCol | async">
                                                                    <span *ngFor="let gar of item.garnishFood">
                                                                        <template [ngIf]="garnish._id === gar">
                                                                            <md-checkbox [disabled]="!_customerCanEdit" [formControlName]="garnish._id" (change)="calculateFinalPriceGarnishFood($event, garnish)" [class.invalid]="!_editOrderItemForm.controls.garnishFood.valid">{{ getGarnishFoodInformation(garnish) }} {{_currencyCode}}<div class="inline-block"> x {{_quantityCount}}</div></md-checkbox> 
                                                                        </template>
                                                                    </span>
                                                                </p>
                                                            </div>
                                                            <p *ngIf="_showGarnishFoodError" class="available-button">{{'ORDER_LIST.SELECT_MAX_VALID' | translate}} {{item.garnishFoodQuantity}}
                                                                {{'ORDER_LIST.ELEMENTS' | translate}}</p>
                                                        </md-tab>
                                                        <md-tab *ngIf="(item.additions.length > 0)" label="{{'ORDER_LIST.ADDITIONS' | translate}}">
                                                            <p>{{'ORDER_LIST.SELECT_ADDITIONS' | translate}}:</p>
                                                            <div formGroupName="additions">
                                                                <p *ngFor="let addition of _additions | async">
                                                                    <span *ngFor="let add of item.additions">
                                                                        <template [ngIf]="addition._id === add">
                                                                            <md-checkbox [disabled]="!_customerCanEdit" [formControlName]="addition._id" (change)="calculateFinalPriceAddition($event, addition)" [class.invalid]="!_editOrderItemForm.controls.additions.valid">{{ getAdditionInformation(addition) }} {{_currencyCode}}<div class="inline-block"> x {{_quantityCount}}</div></md-checkbox> 
                                                                        </template>
                                                                    </span>
                                                                </p>
                                                            </div>
                                                        </md-tab>
                                                    </md-tab-group>
                                                </form>
                                            </div>
                                            <h3>{{'ORDER_LIST.TOTAL_PRICE' | translate}}: {{ _finalPrice }} {{_currencyCode}}</h3>
                                            <div>
                                                <button md-button class="primary-button" *ngIf="_customerCanEdit" [disabled]="!_editOrderItemForm.valid || _showGarnishFoodError"
                                                    (click)="deleteOrderItem(item._id)">{{'ORDER_LIST.DELETE_ITEM' | translate}}</button>
                                                <button md-button class="primary-button" *ngIf="_customerCanEdit && getItemAvailability(item._id)" [disabled]="!_editOrderItemForm.valid || _showGarnishFoodError"
                                                    (click)="editOrderItem(item._id)">{{'ORDER_LIST.MODIFY_ITEM' | translate}}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="addition-detail" class="item-detail">
                    <div *ngFor="let add of _additionDetails | async">
                        <div class="header-detail" #headerDetailCard>
                            <label>{{'ORDER_LIST.ADDITIONS' | translate}}</label>
                            <button class="btn-close" md-raised-button (click)="viewAdditionDetail(true)">
                                <i class="fa fa-times" aria-hidden="true"></i>
                            </button>
                        </div>
                        <div class="item-detail-card">
                            <div class="card-content">
                                <div class="crop"></div>
                                <div class="content" style="margin-top: 20%;">
                                    <p>{{'ORDER_LIST.ADD_ADDITIONS' | translate}}:</p>
                                    <form [formGroup]="_additionsDetailFormGroup">
                                        <md-input-container style="width: 100%;">
                                            <input mdInput [formControlName]="add._id" type="number" placeholder="{{ getAdditionInformation(add) }} {{_currencyCode}}"
                                                min="0" max="99">
                                        </md-input-container>
                                    </form>
                                    <button md-button class="primary-button" *ngIf="_customerCanEdit" style="margin-top: 5%;" (click)="deleteOrderAddition(add._id)">{{'ORDER_LIST.DELETE_ADDITION_ORDER' | translate}}</button>
                                    <button md-button class="primary-button" *ngIf="_customerCanEdit" style="margin-top: 5%;" (click)="editOrderAddition()">{{'ORDER_LIST.MODIFY_ADDITION_ORDER' | translate}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>