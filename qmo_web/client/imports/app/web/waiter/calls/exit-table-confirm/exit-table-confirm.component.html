<div *ngFor="let userDetail of _usersDetails | async">
    <p>Cliente: {{ getUserName(payment.userId) }}</p>
    <div *ngFor="let order of _orders | async" class="order">
        <div *ngIf="order.creation_user === userDetail.userId && order.restaurantId === userDetail.current_restaurant && order.tableId === userDetail.current_table">
            <md-card>
                <p class="order-cancel-error" *ngIf="_showError">Se ha producido un error cancelando la orden {{order.code}}. Por favor valida que la orden esta en estado preparada o en proceso.</p>
                <md-card-title>Orden # {{order.code}} - {{order.status | translate}}</md-card-title>
                <md-card-subtitle>Mesa {{_tableNumber}}</md-card-subtitle>
                <md-card-content>
                    <md-divider></md-divider>
                    <span *ngFor="let it of order.items">
                        <span *ngFor="let item of _items | async">
                            <ng-template [ngIf]="it.itemId === item._id">
                                <h2 class="name">{{it.quantity}} - {{item.name}}</h2>
                                <p *ngIf="it.observations" class="observations">Observaciones: {{it.observations}}</p>
                                <p *ngIf="(it.garnishFood.length <= 0)" class="no-garnish">Sin Guarniciones</p>
                                <div *ngIf="(it.garnishFood.length > 0)" class="garnish-food">
                                    <p class="garnish-title">Guarniciones:</p>
                                    <span *ngFor="let garnish of _garnishFood | async">
                                        <span *ngFor="let gar of it.garnishFood">
                                            <ng-template [ngIf]="gar === garnish._id">
                                                <p class="garnish-name">- {{garnish.name}}</p>     
                                            </ng-template>
                                        </span>
                                    </span>
                                </div>
                                <p class="no-addition" *ngIf="(it.additions.length <= 0)">- Sin Adiciones</p>
                                <div *ngIf="(it.additions.length > 0)" class="addition">
                                    <p class="addition-title">Adiciones:</p>
                                    <span *ngFor="let addition of _additions | async">
                                        <span *ngFor="let add of it.additions">
                                            <ng-template [ngIf]="add === addition._id">
                                                <p class="addition-name">- {{it.quantity}} {{addition.name}}</p>  
                                            </ng-template>
                                        </span>
                                    </span>
                                </div>
                                <md-divider></md-divider>
                            </ng-template>
                        </span>
                    </span>
                    <span *ngFor="let addit of _additions | async">
                        <span *ngFor="let ad of order.additions">
                            <ng-template [ngIf]="addit._id === ad.additionId">
                                <h2 class="name">{{ad.quantity}} Adicion - {{addit.name}}</h2>
                                <md-divider></md-divider>
                            </ng-template>
                        </span>
                    </span>
                </md-card-content>
                <button md-raised-button class="primary-button" (click)="cancelOrderToExitTable(order)">Cancelar Orden</button>
            </md-card>
        </div>
    </div>
</div>
<div class="loading" *ngIf="_loading">
    <md-spinner></md-spinner>
</div>